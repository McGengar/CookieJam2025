[gd_scene load_steps=82 format=3 uid="uid://was10nolxbaj"]

[ext_resource type="Texture2D" uid="uid://c4yrr3542a13n" path="res://Sprites/ani_1_ver.png" id="1_dewec"]
[ext_resource type="Script" uid="uid://bdid18rcqjcb7" path="res://Scripts/slashpivot.gd" id="1_gntrk"]
[ext_resource type="Texture2D" uid="uid://cmy2ovhqsi5oo" path="res://Sprites/dupkaa.png" id="1_megsn"]
[ext_resource type="Texture2D" uid="uid://b42vjrbdb4fbi" path="res://Sprites/slash_sprite_sheet.png" id="1_rpqav"]
[ext_resource type="Texture2D" uid="uid://deks0o0mr64d4" path="res://Sprites/ani_1_ver-export.png" id="1_yoq75"]
[ext_resource type="PackedScene" uid="uid://r7jl6epbow87" path="res://Scenes/phone_ui.tscn" id="2_5ixxa"]
[ext_resource type="PackedScene" uid="uid://cqfmvrr3vyl0g" path="res://Scenes/luck_bar.tscn" id="3_nn08x"]
[ext_resource type="AudioStream" uid="uid://rpakpoqmefc2" path="res://Sounds/scrolls/reel (1).mp3" id="5_5v66d"]
[ext_resource type="AudioStream" uid="uid://ctpoareu2drj5" path="res://Sounds/scrolls/reel (2).mp3" id="6_x63xi"]
[ext_resource type="Texture2D" uid="uid://dxxl7pfi1ti2u" path="res://Sprites/arrow.png" id="7_52ee3"]
[ext_resource type="AudioStream" uid="uid://bj2qnr1q22gbv" path="res://Sounds/scrolls/reel (3).mp3" id="7_i2e8t"]
[ext_resource type="Script" path="res://Scripts/health_bar.gd" id="8_bhhdu"]
[ext_resource type="Texture2D" uid="uid://cebn7bjyg8dcp" path="res://Sprites/sword_animation.png" id="8_ksbbd"]
[ext_resource type="AudioStream" uid="uid://bew3bobs5vfrc" path="res://Sounds/scrolls/reel (4).mp3" id="8_qidb7"]
[ext_resource type="AudioStream" uid="uid://15j15nlsghgt" path="res://Sounds/scrolls/reel (5).mp3" id="9_70hv0"]
[ext_resource type="Texture2D" uid="uid://0rj2n8ywm8vt" path="res://Sprites/backgrounds/background1.png" id="9_glx4g"]
[ext_resource type="AudioStream" uid="uid://b4ce127ytk4ky" path="res://Sounds/scrolls/reel (6).mp3" id="10_8flut"]
[ext_resource type="AudioStream" uid="uid://b2funbybjrus0" path="res://Sounds/scrolls/reel (7).mp3" id="11_u7x0b"]
[ext_resource type="AudioStream" uid="uid://cs7et5ymocc2p" path="res://Sounds/scrolls/reel (8).mp3" id="12_utwlt"]
[ext_resource type="AudioStream" uid="uid://cpgdgpagx5vw4" path="res://Sounds/scrolls/reel (9).mp3" id="13_kih0c"]
[ext_resource type="AudioStream" uid="uid://ck4ib81rg1dv0" path="res://Sounds/scrolls/reel (10).mp3" id="14_lyrkg"]
[ext_resource type="AudioStream" uid="uid://bkdc7do0jfi" path="res://Sounds/scrolls/reel (11).mp3" id="15_75iyv"]
[ext_resource type="AudioStream" uid="uid://cegdo8n4s1sq7" path="res://Sounds/scrolls/reel (12).mp3" id="16_yrofn"]
[ext_resource type="AudioStream" uid="uid://c3m5ton74k35p" path="res://Sounds/scrolls/reel (13).mp3" id="17_5gg6q"]
[ext_resource type="AudioStream" uid="uid://dxffidchy4y1t" path="res://Sounds/scrolls/reel (14).mp3" id="18_wenux"]
[ext_resource type="AudioStream" uid="uid://6lolg502bjog" path="res://Sounds/scrolls/reel (15).mp3" id="19_vy33c"]
[ext_resource type="AudioStream" uid="uid://cuy6vir070muo" path="res://Sounds/scrolls/reel (16).mp3" id="20_h1ppb"]
[ext_resource type="AudioStream" uid="uid://b4cpt6gvj3udk" path="res://Sounds/scrolls/reel (17).mp3" id="21_k22kr"]
[ext_resource type="AudioStream" uid="uid://ci6ssyqdlrgu7" path="res://Sounds/scrolls/reel (18).mp3" id="22_h4i3a"]
[ext_resource type="AudioStream" uid="uid://bxxifhuyst6sx" path="res://Sounds/scrolls/reel (19).mp3" id="23_rocfp"]
[ext_resource type="AudioStream" uid="uid://godl5377iwqd" path="res://Sounds/scrolls/reel (20).mp3" id="24_uytvf"]
[ext_resource type="AudioStream" uid="uid://blqtc03galccf" path="res://Sounds/scrolls/reel (21).mp3" id="25_s7lb4"]
[ext_resource type="AudioStream" uid="uid://nm23v38eiptv" path="res://Sounds/scrolls/reel (22).mp3" id="26_ed4yo"]
[ext_resource type="AudioStream" uid="uid://cw1m5vqbt6ywo" path="res://Sounds/scrolls/reel (23).mp3" id="27_fsa4a"]
[ext_resource type="AudioStream" uid="uid://m7ino0iq5hbw" path="res://Sounds/scrolls/reel (24).mp3" id="28_6f3s4"]
[ext_resource type="AudioStream" uid="uid://b770tgbakrihr" path="res://Sounds/scrolls/reel (25).mp3" id="29_l3y8b"]
[ext_resource type="AudioStream" uid="uid://dr7pu6f0jvlsf" path="res://Sounds/scrolls/reel (26).mp3" id="30_ujsok"]
[ext_resource type="AudioStream" uid="uid://dtl6yq7c565ji" path="res://Sounds/scrolls/reel (27).mp3" id="31_txwsf"]
[ext_resource type="AudioStream" uid="uid://b4in3e6cukx3c" path="res://Sounds/scrolls/reel (28).mp3" id="32_i10l2"]
[ext_resource type="AudioStream" uid="uid://djc0tuuf7war" path="res://Sounds/scrolls/reel (29).mp3" id="33_fgqou"]
[ext_resource type="AudioStream" uid="uid://dwh1melxjcra4" path="res://Sounds/scrolls/reel (30).mp3" id="34_01r87"]
[ext_resource type="AudioStream" uid="uid://bx7c1wb35yuma" path="res://Sounds/scrolls/reel (31).mp3" id="35_jhxql"]
[ext_resource type="AudioStream" uid="uid://bhdor847g0uho" path="res://Sounds/scrolls/reel (32).mp3" id="36_ilb4b"]
[ext_resource type="AudioStream" uid="uid://cwpsyvup5dnms" path="res://Sounds/scrolls/reel (33).mp3" id="37_tlew5"]
[ext_resource type="AudioStream" uid="uid://b1klvom2ewnl1" path="res://Sounds/scrolls/reel (34).mp3" id="38_h55a1"]
[ext_resource type="AudioStream" uid="uid://dvfptvhd0ywo5" path="res://Sounds/scrolls/reel (35).mp3" id="39_dqj3d"]
[ext_resource type="AudioStream" uid="uid://4otatr01hshj" path="res://Sounds/scrolls/reel (36).mp3" id="40_f6yay"]
[ext_resource type="AudioStream" uid="uid://cljhi42d3u8jp" path="res://Sounds/scrolls/reel (37).mp3" id="41_ao2s2"]
[ext_resource type="AudioStream" uid="uid://c1oxyl41nqir7" path="res://Sounds/scrolls/reel (38).mp3" id="42_opjds"]
[ext_resource type="AudioStream" uid="uid://bqattj770cra1" path="res://Sounds/scrolls/reel (39).mp3" id="43_6626w"]
[ext_resource type="AudioStream" uid="uid://crhhvoo7qg8qe" path="res://Sounds/scrolls/reel (40).mp3" id="44_867uf"]
[ext_resource type="AudioStream" uid="uid://f0ner6bufpki" path="res://Sounds/scrolls/reel (41).mp3" id="45_6ilcf"]
[ext_resource type="AudioStream" uid="uid://d1wr6gtqnl71j" path="res://Sounds/scrolls/reel (42).mp3" id="46_6id3a"]
[ext_resource type="AudioStream" uid="uid://4lqqed3pt18r" path="res://Sounds/scrolls/reel (43).mp3" id="47_w1x0d"]
[ext_resource type="AudioStream" uid="uid://bs6ahiuakn2jd" path="res://Sounds/scrolls/reel (44).mp3" id="48_ovjwc"]
[ext_resource type="AudioStream" uid="uid://cdqx7u86hwjoy" path="res://Sounds/scrolls/reel (45).mp3" id="49_jawh0"]
[ext_resource type="AudioStream" uid="uid://bwh1x0ots4q7a" path="res://Sounds/scrolls/reel (46).mp3" id="50_jq6en"]
[ext_resource type="AudioStream" uid="uid://nuaqbxgxigm1" path="res://Sounds/scrolls/reel (47).mp3" id="51_1g8ls"]
[ext_resource type="AudioStream" uid="uid://d34fi1slcg43y" path="res://Sounds/scrolls/reel (48).mp3" id="52_4wp3f"]

[sub_resource type="GDScript" id="GDScript_qbkls"]
resource_name = "player"
script/source = "extends CharacterBody2D
@onready var timer: Timer = $Timer
@onready var platformchecker: RayCast2D = $platformchecker
@onready var nothingchecker: RayCast2D = $nothingchecker
@onready var sprite_2d: AnimatedSprite2D = $Sprite2D
@onready var slashpivot: Node2D = $slashpivot
@onready var animated_sprite_2d: AnimatedSprite2D = $slashpivot/AnimatedSprite2D



var SPEED = Player_globals.speed
var JUMP_VELOCITY = Player_globals.jump
var attack_speed = Player_globals.attack_speed
var damage = Player_globals.damage
var max_hp = Player_globals.max_hp
var max_jumps = Player_globals.max_jumps
var hp = max_hp


var jumps_avail = max_jumps

var ledge_progress = 0
var last_dir
var is_wall_jumping = false
var is_climbing = false
var can_atk = true
var last_wall = 0
var hit_enemies: Array = []
var dead = false

func _ready() -> void:
	SPEED = Player_globals.speed
	JUMP_VELOCITY = Player_globals.jump
	attack_speed = Player_globals.attack_speed
	damage = Player_globals.damage
	max_hp = Player_globals.max_hp
	max_jumps = Player_globals.max_jumps
	animated_sprite_2d.frame = 0
	hp = max_hp
func _physics_process(delta):
	$attack_cooldown.wait_time = 100.0/attack_speed
	if animated_sprite_2d.frame== 6:
		$slashpivot/AnimatedSprite2D/Area2D.monitoring = false
		animated_sprite_2d.visible = false
	
	if not is_on_floor() and not is_on_wall() and is_climbing == false:
			velocity += get_gravity() * delta
			if dead:
				move_and_slide()
	if not dead:
		if Input.is_action_just_pressed(\"debug_1\"):
			Player_globals.debug_gen_card(2)
			refresh_stats()
		
		$Sprite2D.speed_scale = SPEED/400
		var direction = Input.get_axis(\"move_left\", \"move_right\")
		if direction!=0 and not is_on_wall():
			$Sprite2D.play(\"walk\")
		elif direction ==0:
			$Sprite2D.play(\"stand\")
		if is_on_floor():
			jump_refresh()
			last_wall = 0
		if is_on_wall():
			sprite_2d.play(\"slide\")
			if velocity.y < 0:
				pass
				velocity.y *= 0.9
			velocity += get_gravity() * delta /4
		if is_on_wall() and is_climbing == false:
			jump_refresh()
			if Input.is_action_just_pressed(\"jump\"):
				if Input.is_action_pressed(\"move_right\"):
					last_wall = 1
					if jumps_avail > 0:
						jump_timer()
						velocity.y = JUMP_VELOCITY
						velocity.x += -direction * SPEED
						jumps_avail -= 1
				elif Input.is_action_pressed(\"move_left\"):
					last_wall = -1
					if jumps_avail > 0:
						jump_timer()
						velocity.y = JUMP_VELOCITY
						velocity.x += -direction * SPEED
						jumps_avail -= 1
		if Input.is_action_just_pressed(\"interact\"):
			attack()
		# Handle jump.
		if Input.is_action_just_pressed(\"jump\") and jumps_avail > 0:
			jumps_avail -= 1
			velocity.y = JUMP_VELOCITY
		if platformchecker.is_colliding() and not nothingchecker.is_colliding() and is_on_wall():
			is_climbing = true
		if is_climbing == true:
				move_to_path(delta,last_dir)
		else:
			ledge_progress = 0
		if direction == -1:
			last_dir = direction
			sprite_2d.flip_h = true
			platformchecker.rotation = deg_to_rad(180)
			nothingchecker.rotation = deg_to_rad(180)
		elif direction == 1:
			last_dir = direction
			sprite_2d.flip_h = false
			platformchecker.rotation = deg_to_rad(0)
			nothingchecker.rotation = deg_to_rad(0)
		if direction and is_wall_jumping == false and is_climbing == false:
			velocity.x = direction * SPEED
		elif is_wall_jumping == false and is_climbing == false:
				velocity.x = move_toward(velocity.x, 0, SPEED)

		move_and_slide()

func refresh_stats():
	SPEED = Player_globals.speed
	JUMP_VELOCITY = Player_globals.jump
	attack_speed = Player_globals.attack_speed
	damage = Player_globals.damage
	max_hp = Player_globals.max_hp
	max_jumps = Player_globals.max_jumps

func attack():
	if can_atk:
		if Player_globals.scopiest_weapons:
			animated_sprite_2d.scale.x=5
			animated_sprite_2d.scale.y=5
		if Player_globals.nearsighted:
			animated_sprite_2d.scale.x=1
			animated_sprite_2d.scale.y=1
		if Player_globals.scopiest_weapons ==  Player_globals.nearsighted:
			animated_sprite_2d.scale.x=3
			animated_sprite_2d.scale.y=3
		var mouse_pos = get_global_mouse_position()
		if mouse_pos.x < global_position.x:
			last_dir = -1
			sprite_2d.flip_h = true
			slashpivot.scale.x = -1
			
			platformchecker.rotation = deg_to_rad(180)
			nothingchecker.rotation = deg_to_rad(180)
			
		else:
			last_dir = 1
			sprite_2d.flip_h = false
			slashpivot.scale.x = 1 
			
			platformchecker.rotation = deg_to_rad(0)
			nothingchecker.rotation = deg_to_rad(0)

		hit_enemies.clear()
		$slashpivot/AnimatedSprite2D/Area2D.monitoring = true
		can_atk = false
		animated_sprite_2d.visible = true
		animated_sprite_2d.frame = 0
		animated_sprite_2d.play(\"attack\")
		$attack_cooldown.start()
			
func jump_refresh():
	jumps_avail = Player_globals.max_jumps

func jump_timer():
	timer.start()
	is_wall_jumping = true
func move_to_path(how_much,dir):
	if is_climbing and not is_wall_jumping:
		var save_dir = dir
		ledge_progress += how_much*2
		velocity.y = -180 * ledge_progress
		await get_tree().create_timer(0.35).timeout
		if ledge_progress + how_much > 1:
			velocity.x = save_dir * 1000 * ledge_progress
			is_climbing = false
		
func _on_timer_timeout() -> void:
	is_wall_jumping = false

func take_dmg(amount):
	hp -= amount
	if Player_globals.vulnerable:
		hp -= amount
	if hp <= 0:
		die()
func die():
	dead = true
	sprite_2d.play(\"dead\")
func _on_area_2d_body_entered(body: Node2D) -> void:
	if body.is_in_group(\"enemies\") and not body in hit_enemies:
		body.take_dmg(damage)
		if Player_globals.vamp and !Player_globals.tainted:
			heal(0.25*damage)
		if Player_globals.r_thorns:
			take_dmg(5)
		hit_enemies.append(body)
	elif body.is_in_group(\"slotsmachine\"):
		body.take_dmg(5)

@onready var arrow_pivot: Marker2D = $ArrowPivot

var rotation_smoothing_speed: float = 15.0

func _process(delta: float) -> void:
	update_arrow_direction(delta)

func update_arrow_direction(delta: float) -> void:
	var nearest_enemy = find_nearest_enemy()

	if nearest_enemy and is_instance_valid(nearest_enemy):
		arrow_pivot.show()
		
		var direction = nearest_enemy.global_position - global_position
		
		var target_angle = direction.angle()
		
		arrow_pivot.rotation = lerp_angle(arrow_pivot.rotation, target_angle, rotation_smoothing_speed * delta)
		
	else:
		arrow_pivot.hide()

func find_nearest_enemy() -> Node2D:
	var all_enemies = get_tree().get_nodes_in_group(\"enemies\")
	
	if all_enemies.is_empty():
		return null

	var nearest: Node2D = null
	var shortest_distance_squared = INF 
	
	for enemy in all_enemies:
		if is_instance_valid(enemy):
			var distance_sq = global_position.distance_squared_to(enemy.global_position)
			
			if distance_sq < shortest_distance_squared:
				shortest_distance_squared = distance_sq
				nearest = enemy
				
	return nearest

func heal(amount: int):
	hp += amount
	if hp > max_hp:
		hp = max_hp


func _on_attack_cooldown_timeout():
	can_atk = true


func _on_hp_timer_timeout():
	if Player_globals.regen and !Player_globals.tainted:
		heal(1)
	if Player_globals.poisoned:
		take_dmg(1)
"

[sub_resource type="AtlasTexture" id="AtlasTexture_miouo"]
atlas = ExtResource("1_yoq75")
region = Rect2(0, 0, 106, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_glx4g"]
atlas = ExtResource("1_dewec")
region = Rect2(0, 0, 64, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_52ee3"]
atlas = ExtResource("1_dewec")
region = Rect2(0, 0, 64, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_bhhdu"]
atlas = ExtResource("1_dewec")
region = Rect2(64, 0, 64, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_megsn"]
atlas = ExtResource("1_dewec")
region = Rect2(128, 0, 64, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_yoq75"]
atlas = ExtResource("1_dewec")
region = Rect2(192, 0, 64, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_ksbbd"]
atlas = ExtResource("1_dewec")
region = Rect2(256, 0, 64, 96)

[sub_resource type="SpriteFrames" id="SpriteFrames_glx4g"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_miouo")
}],
"loop": true,
"name": &"dead",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("1_megsn")
}],
"loop": true,
"name": &"slide",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_glx4g")
}],
"loop": true,
"name": &"stand",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_52ee3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bhhdu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_megsn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yoq75")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ksbbd")
}],
"loop": true,
"name": &"walk",
"speed": 12.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kyqiw"]
size = Vector2(54, 80)

[sub_resource type="AtlasTexture" id="AtlasTexture_nn08x"]
atlas = ExtResource("1_rpqav")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_o3h8g"]
atlas = ExtResource("8_ksbbd")
region = Rect2(0, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_1e7my"]
atlas = ExtResource("8_ksbbd")
region = Rect2(96, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_arntx"]
atlas = ExtResource("8_ksbbd")
region = Rect2(192, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_lslt6"]
atlas = ExtResource("8_ksbbd")
region = Rect2(288, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_ulo2v"]
atlas = ExtResource("8_ksbbd")
region = Rect2(384, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_kyqiw"]
atlas = ExtResource("1_rpqav")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_gntrk"]
atlas = ExtResource("1_rpqav")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_dewec"]
atlas = ExtResource("1_rpqav")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_5ixxa"]
atlas = ExtResource("1_rpqav")
region = Rect2(192, 0, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_52ee3"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_nn08x")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o3h8g")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1e7my")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_arntx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lslt6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ulo2v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nn08x")
}],
"loop": false,
"name": &"attack",
"speed": 20.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_nn08x")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kyqiw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gntrk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dewec")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5ixxa")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nn08x")
}],
"loop": false,
"name": &"default",
"speed": 20.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_bhhdu"]
radius = 37.83251
height = 75.66502

[node name="Player" type="CharacterBody2D" groups=["player"]]
top_level = true
collision_layer = 2
script = SubResource("GDScript_qbkls")

[node name="Sprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(0, -14)
sprite_frames = SubResource("SpriteFrames_glx4g")
animation = &"dead"
autoplay = "stand"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -13)
shape = SubResource("RectangleShape2D_kyqiw")

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(1.5, 1.5)

[node name="PhoneUI" parent="Camera2D" node_paths=PackedStringArray("luck_bar") instance=ExtResource("2_5ixxa")]
position = Vector2(-343, -25)
cooldown_time = 1.0
luck_bar = NodePath("LuckBar")
scroll_sounds = Array[AudioStream]([ExtResource("5_5v66d"), ExtResource("6_x63xi"), ExtResource("7_i2e8t"), ExtResource("8_qidb7"), ExtResource("9_70hv0"), ExtResource("10_8flut"), ExtResource("11_u7x0b"), ExtResource("12_utwlt"), ExtResource("13_kih0c"), ExtResource("14_lyrkg"), ExtResource("15_75iyv"), ExtResource("16_yrofn"), ExtResource("17_5gg6q"), ExtResource("18_wenux"), ExtResource("19_vy33c"), ExtResource("20_h1ppb"), ExtResource("21_k22kr"), ExtResource("22_h4i3a"), ExtResource("23_rocfp"), ExtResource("24_uytvf"), ExtResource("25_s7lb4"), ExtResource("26_ed4yo"), ExtResource("27_fsa4a"), ExtResource("28_6f3s4"), ExtResource("29_l3y8b"), ExtResource("30_ujsok"), ExtResource("31_txwsf"), ExtResource("32_i10l2"), ExtResource("33_fgqou"), ExtResource("34_01r87"), ExtResource("35_jhxql"), ExtResource("36_ilb4b"), ExtResource("37_tlew5"), ExtResource("38_h55a1"), ExtResource("39_dqj3d"), ExtResource("40_f6yay"), ExtResource("41_ao2s2"), ExtResource("42_opjds"), ExtResource("43_6626w"), ExtResource("44_867uf"), ExtResource("45_6ilcf"), ExtResource("46_6id3a"), ExtResource("47_w1x0d"), ExtResource("48_ovjwc"), ExtResource("49_jawh0"), ExtResource("50_jq6en"), ExtResource("51_1g8ls"), ExtResource("52_4wp3f")])

[node name="LuckBar" parent="Camera2D/PhoneUI" instance=ExtResource("3_nn08x")]
offset_left = -23.0
offset_top = -183.0
offset_right = 243.0
offset_bottom = -156.0
decay_speed = 5.0

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="Camera2D/PhoneUI"]

[node name="Timer" type="Timer" parent="Camera2D/PhoneUI"]
wait_time = 5.0
one_shot = true

[node name="Timer" type="Timer" parent="."]
wait_time = 0.2

[node name="platformchecker" type="RayCast2D" parent="."]
position = Vector2(0, 9)
target_position = Vector2(36, 0)

[node name="nothingchecker" type="RayCast2D" parent="."]
position = Vector2(1, -25)
target_position = Vector2(36, 0)

[node name="slashpivot" type="RigidBody2D" parent="."]
freeze = true
script = ExtResource("1_gntrk")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="slashpivot"]
z_index = 1
position = Vector2(1.9999886, -1.0000002)
scale = Vector2(3, 3)
sprite_frames = SubResource("SpriteFrames_52ee3")
animation = &"attack"
frame = 5

[node name="Area2D" type="Area2D" parent="slashpivot/AnimatedSprite2D"]
position = Vector2(15.000002, 42)
collision_layer = 0
collision_mask = 4
monitoring = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="slashpivot/AnimatedSprite2D/Area2D"]
position = Vector2(-12.162562, -39.16256)
shape = SubResource("CapsuleShape2D_bhhdu")

[node name="CanvasLayer" type="CanvasLayer" parent="slashpivot/AnimatedSprite2D"]
layer = -1
scale = Vector2(5.4236107, 5.5125)
transform = Transform2D(5.4236107, 0, 0, 5.5125, 0, 0)

[node name="TextureRect" type="TextureRect" parent="slashpivot/AnimatedSprite2D/CanvasLayer"]
show_behind_parent = true
z_index = -1
anchors_preset = -1
anchor_left = -0.021000002
anchor_top = 0.008
anchor_right = -0.021000002
anchor_bottom = 0.008
offset_left = 21.426315
offset_top = -8.267902
offset_right = 242.128
offset_bottom = 117.6278
texture = ExtResource("9_glx4g")

[node name="atkcd" type="Timer" parent="slashpivot"]
wait_time = 0.75

[node name="ArrowPivot" type="Marker2D" parent="."]

[node name="ArrowSprite" type="Sprite2D" parent="ArrowPivot"]
position = Vector2(130, 0)
rotation = 1.5707964
texture = ExtResource("7_52ee3")

[node name="ProgressBar" type="ProgressBar" parent="."]
offset_left = -366.0
offset_top = -177.0
offset_right = -183.0
offset_bottom = -122.0
show_percentage = false
script = ExtResource("8_bhhdu")

[node name="attack_cooldown" type="Timer" parent="."]

[node name="hp_timer" type="Timer" parent="."]
autostart = true

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="area_entered" from="slashpivot/AnimatedSprite2D/Area2D" to="." method="_on_area_2d_area_entered"]
[connection signal="body_entered" from="slashpivot/AnimatedSprite2D/Area2D" to="." method="_on_area_2d_body_entered"]
[connection signal="timeout" from="slashpivot/atkcd" to="slashpivot" method="_on_atkcd_timeout"]
[connection signal="timeout" from="attack_cooldown" to="." method="_on_attack_cooldown_timeout"]
[connection signal="timeout" from="hp_timer" to="." method="_on_hp_timer_timeout"]
